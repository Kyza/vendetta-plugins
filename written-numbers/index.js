(function(u,i,s,L,N,l,$,w,B,R,A){"use strict";function p(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];const e=a.map(function(r){switch(typeof r){case"string":return r;case"object":return JSON.stringify(r)}return r?.toString()}).join(" ");A.showToast(e,l.getAssetIDByName("ic_badge_staff")),R.logger.log(...a)}const F=/^-?(?:\d+\.?|\.\d+|\d+\.\d+)$/,g=new Map;async function m(t){let{number:a,options:n,languageOptions:e}=t;if(n??={language:"en"},e??={},g.has(a))return g.get(a);if(!F.test(a))try{a=new Function(`return ${a}`)()}catch(o){return p(o),"NotANumber"}const r=await fetch("https://numbers.kyza.net/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({number:a,options:n,languageOptions:e})}).then(function(o){return o.text()});return g.set(a,r),r}const{getCurrentUser:M}=w.findByProps("getCurrentUser"),P=w.findByProps("sendMessage","receiveMessage");let _;function v(t,a){return t.some(function(n){let[e,r]=n;return e<=a&&a<=r})}function z(t){return t.charAt(0).toUpperCase()+t.slice(1)}function U(t,a,n,e){return t.substring(0,a)+e+t.substring(n)}var d;(function(t){t[t.PLAIN=0]="PLAIN",t[t.SYNTAX=1]="SYNTAX"})(d||(d={}));const h=/(?:(?:(?<!\\)```(?:.|\n)+?(?<!\\)```)|(?:(?<!\\)`[^`]+?`))/g,f=/(([-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*))|(?:(?<!\\)<.+?>))/gi,y=/(\\)?\b(?<!n)-?(\d+\.|\d+|\.\d+|\d+\.\d+)(?!;;)\b/gi,b=/(\\)?\b((n)(.+?);;)/gi;async function S(t){const a=t,n=[];let e;for(;(e=h.exec(t))!==null;)e.index===h.lastIndex&&h.lastIndex++,n.push([e.index,e.index+e[0].length-1]);for(e=null;(e=f.exec(t))!==null;)e.index===f.lastIndex&&f.lastIndex++,n.push([e.index,e.index+e[0].length-1]);const r=[];if(i.storage.replace.syntax)for(e=null;(e=b.exec(t))!==null;)e.index===b.lastIndex&&b.lastIndex++,v(n,e.index)||(r.push({type:d.SYNTAX,match:e,capitalize:e[3]==="N",words:e[1]==="\\"?e[2]:m({number:e[4]})}),n.push([e.index,e.index+e[0].length-1]));if(i.storage.replace.all)for(e=null;(e=y.exec(t))!==null;)e.index===y.lastIndex&&y.lastIndex++,v(n,e.index)||r.push({type:d.PLAIN,match:e,capitalize:!1,words:e[1]==="\\"?e[2]:m({number:e[2]})});r.sort(function(o,c){return o.match.index>c.match.index?-1:o.match.index<c.match.index?1:0});for(const o of r){let c=await o.words;o.capitalize&&(c=z(c)),t=U(t,o.match.index,o.match.index+o.match[0].length,c)}return M().premiumType===0&&t.length>2e3||t.length>4e3?(p("The transformed message is too long."),a):t}function W(){I(),_=B.instead("sendMessage",P,function(t,a){const n=JSON.parse(JSON.stringify(t));(async function(){try{n[1].content=await S(n[1].content)}catch(e){p(e.stack)}a(...n)})()})}function I(){_?.()}const{FormSection:T,FormDivider:Y,FormRow:C,FormSwitchRow:k,FormText:j}=$.Forms,D=s.stylesheet.createThemedStyleSheet({view:{flex:1},codeblock:{fontFamily:s.constants.Fonts.CODE_SEMIBOLD,includeFontPadding:!1,fontSize:12,backgroundColor:N.semanticColors.BACKGROUND_SECONDARY,marginLeft:15,marginRight:15,paddingTop:8,paddingBottom:6,paddingLeft:10,paddingRight:10,borderRadius:5,borderWidth:2,borderColor:N.semanticColors.BACKGROUND_SECONDARY_ALT}});function J(){const[t,a]=s.React.useState("Loading...");return s.React.useEffect(async function(){a(await S(`\\3001 -> 3001

\\n3001;; -> n3001;;
\\N3001;; -> N3001;;

\\n10n**100n;; -> n10n**100n;;

\\\\3001 -> \\3001
\\\\n3001;; -> \\n3001;;

\`3001\` -> \`3001\`

\`\`\`
3001
\`\`\`
|
V
\`\`\`
3001
\`\`\`

https://link.tld/3001 -> https://link.tld/3001
<file:///path/3001> -> <file:///path/3001>`))},[]),L.useProxy(i.storage),s.React.createElement(s.ReactNative.ScrollView,{style:D.view},s.React.createElement(T,{title:"Usage",titleStyleType:"no_border"},s.React.createElement(j,{style:D.codeblock},t)),s.React.createElement(T,{title:"Message Text Replacement",titleStyleType:"no_border"},s.React.createElement(k,{label:"All Numbers",subLabel:"Replaces all numbers in your messages like `3001`.",leading:s.React.createElement(C.Icon,{source:l.getAssetIDByName(i.storage.replace.all?"ic_check_24px":"ic_close_24px")}),value:i.storage.replace.all,onValueChange:function(n){i.storage.replace.all=n}}),s.React.createElement(Y,null),s.React.createElement(k,{label:"Syntax Numbers",subLabel:"Replaces numbers in your messages with special syntax like `n3001;;`.",leading:s.React.createElement(C.Icon,{source:l.getAssetIDByName(i.storage.replace.syntax?"ic_check_24px":"ic_close_24px")}),value:i.storage.replace.syntax,onValueChange:function(n){i.storage.replace.syntax=n}})))}function x(t,a,n){return t.find(function(e){return e.name===a})?.value??n}let O;function V(){E(),O=R.commands.registerCommand({name:"written number",displayName:"written number",applicationId:"written-numbers",description:"Makes numbers written.",displayDescription:"Makes numbers written.",type:1,inputType:1,options:[{name:"number",displayName:"number",description:"The number to convert.",displayDescription:"The number to convert.",type:3,required:!0},{name:"commas",displayName:"commas",description:"Whether or not to use commas.",displayDescription:"Whether or not to use commas.",type:5,required:!1},{name:"hundred_and",displayName:"hundred_and",description:"Whether or not to use and after hundreds.",displayDescription:"Whether or not to use and after hundreds.",type:5,required:!1}],async execute(t,a){let n=x(t,"number","");const e=x(t,"commas",!1),r=x(t,"hundred_and",!1),o=await m({number:n,languageOptions:{commas:e,hundredAnd:r}});s.clipboard.setString(o),A.showToast("Copied number to clipboard.",l.getAssetIDByName("toast_copy_link"))}})}function E(){O?.()}i.storage.replace??={all:!0,syntax:!0},i.storage.replace.all=i.storage.replace.all!=null?i.storage.replace.all:i.storage.replace.basic;var q={onLoad:function(){V(),W()},onUnload:function(){E(),I()},settings:J};return u.default=q,Object.defineProperty(u,"__esModule",{value:!0}),u})({},vendetta.plugin,vendetta.metro.common,vendetta.storage,vendetta.ui,vendetta.ui.assets,vendetta.ui.components,vendetta.metro,vendetta.patcher,vendetta,vendetta.ui.toasts);
