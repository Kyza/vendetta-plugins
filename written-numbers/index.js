(function(l,i,m,k,c,C,p,w,v,O){"use strict";const{FormSection:B,FormDivider:P,FormRow:I,FormSwitchRow:A}=C.Forms;function z(){return k.useProxy(i.storage),React.createElement(m.ReactNative.ScrollView,{style:{flex:1}},React.createElement(B,{title:"Message Text Replacement",titleStyleType:"no_border"},React.createElement(A,{label:"Basic Numbers",subLabel:"Replaces numbers in your messages like `10 -> ten`.",leading:React.createElement(I.Icon,{source:c.getAssetIDByName(i.storage.replace.basic?"ic_check_24px":"ic_close_24px")}),value:i.storage.replace.basic,onValueChange:function(t){i.storage.replace.basic=t}}),React.createElement(P,null),React.createElement(A,{label:"Syntax Numbers",subLabel:"Replaces numbers in your messages with syntax like `n10;; -> ten` and `N10n**100n;; -> Ten duotrigintillion`.",leading:React.createElement(I.Icon,{source:c.getAssetIDByName(i.storage.replace.syntax?"ic_check_24px":"ic_close_24px")}),value:i.storage.replace.syntax,onValueChange:function(t){i.storage.replace.syntax=t}})))}let _;function E(){R(),_=p.commands.registerCommand({name:"reload",displayName:"reload",applicationId:"vendetta",description:"Reloads the Discord client.",displayDescription:"Reloads the Discord client.",type:1,inputType:1,options:[],async execute(t,a){m.ReactNative.NativeModules.BundleUpdaterManager.reload()}})}function R(){_?.()}function g(t,a,n){return t.find(function(e){return e.name===a})?.value??n}function u(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];const e=a.map(function(r){switch(typeof r){case"string":return r;case"object":return JSON.stringify(r)}return r?.toString()}).join(" ");w.showToast(e,c.getAssetIDByName("ic_badge_staff")),p.logger.log(...a)}const F=/^-?(?:\d+\.?|\.\d+|\d+\.\d+)$/,h=new Map;async function y(t){let{number:a,options:n,languageOptions:e}=t;if(n??={language:"en"},e??={},h.has(a))return h.get(a);if(!F.test(a))try{a=new Function(`return ${a}`)()}catch(s){return u(s),"NotANumber"}const r=await fetch("https://numbers.kyza.net/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({number:a,options:n,languageOptions:e})}).then(function(s){return s.text()});return h.set(a,r),r}let T;function L(){S(),T=p.commands.registerCommand({name:"written number",displayName:"written number",applicationId:"written-numbers",description:"Makes numbers written.",displayDescription:"Makes numbers written.",type:1,inputType:1,options:[{name:"number",displayName:"number",description:"The number to convert.",displayDescription:"The number to convert.",type:3,required:!0},{name:"commas",displayName:"commas",description:"Whether or not to use commas.",displayDescription:"Whether or not to use commas.",type:5,required:!1},{name:"hundred_and",displayName:"hundred_and",description:"Whether or not to use and after hundreds.",displayDescription:"Whether or not to use and after hundreds.",type:5,required:!1}],async execute(t,a){let n=g(t,"number","");const e=g(t,"commas",!1),r=g(t,"hundred_and",!1),s=await y({number:n,languageOptions:{commas:e,hundredAnd:r}});m.clipboard.setString(s),w.showToast("Copied number to clipboard.",c.getAssetIDByName("toast_copy_link"))}})}function S(){T?.()}const{getCurrentUser:U}=v.findByProps("getCurrentUser"),j=v.findByProps("sendMessage","receiveMessage");let D;function $(t,a){return t.some(function(n){let[e,r]=n;return e<=a&&a<=r})}function J(t){return t.charAt(0).toUpperCase()+t.slice(1)}function W(t,a,n,e){return t.substring(0,a)+e+t.substring(n)}var d;(function(t){t[t.PLAIN=0]="PLAIN",t[t.SYNTAX=1]="SYNTAX"})(d||(d={}));const f=/(?:(?:(?<!\\)```(?:.|\n)+?(?<!\\)```)|(?:(?<!\\)`[^`]+?`))/g,x=/(([-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*))|(?:(?<!\\)<.+?>))/gi,b=/\b(?<!n)-?(?:\d+\.|\d+|\.\d+|\d+\.\d+)(?!;;)\b/gi,N=/\b(n)(.+?);;/gi;async function q(t){const a=t,n=[];let e;for(;(e=f.exec(t))!==null;)e.index===f.lastIndex&&f.lastIndex++,n.push([e.index,e.index+e[0].length-1]);for(e=null;(e=x.exec(t))!==null;)e.index===x.lastIndex&&x.lastIndex++,u(e[0]),n.push([e.index,e.index+e[0].length-1]);const r=[];if(i.storage.replace.syntax)for(e=null;(e=N.exec(t))!==null;)e.index===N.lastIndex&&N.lastIndex++,$(n,e.index)||(r.push({type:d.SYNTAX,match:e,capitalize:e[1]==="N",words:y({number:e[2]})}),n.push([e.index,e.index+e[0].length-1]));if(i.storage.replace.basic)for(e=null;(e=b.exec(t))!==null;)e.index===b.lastIndex&&b.lastIndex++,$(n,e.index)||r.push({type:d.PLAIN,match:e,capitalize:!1,words:y({number:e[0]})});r.sort(function(s,o){return s.match.index>o.match.index?-1:s.match.index<o.match.index?1:0});for(const s of r){let o=await s.words;s.capitalize&&(o=J(o)),t=W(t,s.match.index,s.match.index+s.match[0].length,o)}return U().premiumType===0&&t.length>2e3||t.length>4e3?(u("The transformed message is too long."),a):t}function V(){M(),D=O.instead("sendMessage",j,function(t,a){const n=JSON.parse(JSON.stringify(t));(async function(){try{n[1].content=await q(n[1].content)}catch(e){u(e.stack)}a(...n)})()})}function M(){D?.()}i.storage.replace??={basic:!0,syntax:!0};var X={onLoad:function(){L(),E(),V()},onUnload:function(){S(),R(),M()},settings:z};return l.default=X,Object.defineProperty(l,"__esModule",{value:!0}),l})({},vendetta.plugin,vendetta.metro.common,vendetta.storage,vendetta.ui.assets,vendetta.ui.components,vendetta,vendetta.ui.toasts,vendetta.metro,vendetta.patcher);
