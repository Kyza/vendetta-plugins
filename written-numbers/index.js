(function(b,i,c,B,S,m,U,w,x,_,v){"use strict";function g(){for(var t=arguments.length,a=new Array(t),e=0;e<t;e++)a[e]=arguments[e];const n=a.map(function(s){switch(typeof s){case"string":return s;case"object":return JSON.stringify(s)}return s?.toString()}).join(" ");v.showToast(n,m.getAssetIDByName("ic_badge_staff")),_.logger.log(...a)}const Y=/^-?(?:\d+\.?|\.\d+|\d+\.\d+)$/,N=new Map;async function I(t){let{number:a,options:e,languageOptions:n}=t;if(e??={language:"en"},n??={},N.has(a))return N.get(a);if(!Y.test(a))try{a=new Function(`return ${a}`)()}catch(r){return g(r),"NotANumber"}const s=await fetch("https://numbers.kyza.net/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({number:a,options:e,languageOptions:n})}).then(function(r){return r.text()});return N.set(a,s),s}const{canUseIncreasedMessageLength:W}=w.findByProps("canUseIncreasedMessageLength"),A=w.findByProps("sendMessage","receiveMessage"),j=w.findByProps("uploadLocalFiles");let T,L,k,C;function f(t,a){return t.some(function(e){let[n,s]=e;return n<=a&&a<=s})}function J(t){return t.charAt(0).toUpperCase()+t.slice(1)}function D(t,a,e,n){return t.substring(0,a)+n+t.substring(e)}var o;(function(t){t[t.PLAIN=0]="PLAIN",t[t.SYNTAX=1]="SYNTAX"})(o||(o={}));const l=/(?:(?:(?<!\\)```(?:.|\n)+?(?<!\\)```)|(?:(?<!\\)`[^`]+?`))/g,d=/(((?:\w+):\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&\/=]*))|(?:(?<!\\)<.+?>))/gi,u=/(\\)?\b(?<!n)-?(\d+\.\d+|\d+\.|\.\d+|\d+)(?!;;)\b/gi,p=/(\\)?\b((n)(.+?);;)/gi;async function y(t){const a=t,e=[];let n;for(;(n=l.exec(t))!==null;)n.index===l.lastIndex&&l.lastIndex++,e.push([n.index,n.index+n[0].length-1]);for(n=null;(n=d.exec(t))!==null;)n.index===d.lastIndex&&d.lastIndex++,e.push([n.index,n.index+n[0].length-1]);const s=[];if(i.storage.replace.syntax)for(n=null;(n=p.exec(t))!==null;)n.index===p.lastIndex&&p.lastIndex++,f(e,n.index)||(s.push({type:o.SYNTAX,match:n,capitalize:n[3]==="N",words:n[1]==="\\"?n[2]:I({number:n[4]})}),e.push([n.index,n.index+n[0].length-1]));if(i.storage.replace.all)for(n=null;(n=u.exec(t))!==null;)n.index===u.lastIndex&&u.lastIndex++,f(e,n.index)||s.push({type:o.PLAIN,match:n,capitalize:!1,words:n[1]==="\\"?n[2]:I({number:n[2]})});s.sort(function(r,h){return r.match.index>h.match.index?-1:r.match.index<h.match.index?1:0});for(const r of s){let h=await r.words;r.capitalize&&(h=J(h)),t=D(t,r.match.index,r.match.index+r.match[0].length,h)}return t.length>2e3&&!W()||t.length>4e3?(g("The transformed message is too long."),a):t}function V(t){const a=[];let e;for(;(e=l.exec(t))!==null;)e.index===l.lastIndex&&l.lastIndex++,a.push([e.index,e.index+e[0].length-1]);for(e=null;(e=d.exec(t))!==null;)e.index===d.lastIndex&&d.lastIndex++,a.push([e.index,e.index+e[0].length-1]);const n=[];if(i.storage.replace.syntax)for(e=null;(e=p.exec(t))!==null;)e.index===p.lastIndex&&p.lastIndex++,f(a,e.index)||(n.push({type:o.SYNTAX,match:e,capitalize:e[3]==="N",words:"\\"+e[2]}),a.push([e.index,e.index+e[0].length-1]));if(i.storage.replace.all)for(e=null;(e=u.exec(t))!==null;)e.index===u.lastIndex&&u.lastIndex++,f(a,e.index)||n.push({type:o.PLAIN,match:e,capitalize:!1,words:"\\"+e[2]});n.sort(function(s,r){return s.match.index>r.match.index?-1:s.match.index<r.match.index?1:0});for(const s of n){let r=s.words;t=D(t,s.match.index,s.match.index+s.match[0].length,r)}return t}function X(){E(),T=x.instead("sendMessage",A,async function(t,a){const e=JSON.parse(JSON.stringify(t));try{e[1].content=await y(e[1].content)}catch(n){g(n.stack)}a(...e)}),L=x.instead("uploadLocalFiles",j,async function(t,a){try{t[0].parsedMessage.content=await y(t[0].parsedMessage.content)}catch(e){g(e.stack)}a(...t)}),k=x.before("startEditMessage",A,function(t){t[2]=V(t[2])}),C=x.instead("editMessage",A,async function(t,a){try{t[2].content=await y(t[2].content)}catch(e){g(e.stack)}a(...t)})}function E(){T?.(),L?.(),k?.(),C?.()}const{FormSection:M,FormDivider:q,FormRow:O,FormSwitchRow:F,FormText:Z}=U.Forms,P=c.stylesheet.createThemedStyleSheet({view:{flex:1},codeblock:{fontFamily:c.constants.Fonts.CODE_SEMIBOLD,includeFontPadding:!1,fontSize:12,backgroundColor:S.semanticColors.BACKGROUND_SECONDARY,marginLeft:15,marginRight:15,paddingTop:8,paddingBottom:6,paddingLeft:10,paddingRight:10,borderRadius:5,borderWidth:2,borderColor:S.semanticColors.BACKGROUND_SECONDARY_ALT}});function G(){const[t,a]=c.React.useState("Loading...");return c.React.useEffect(async function(){a(await y(`\\3001 -> 3001

\\n3001;; -> n3001;;
\\N3001;; -> N3001;;

\\n10n**100n;; -> n10n**100n;;

\\\\3001 -> \\3001
\\\\n3001;; -> \\n3001;;

\`3001\` -> \`3001\`

\`\`\`
3001
\`\`\`
|
V
\`\`\`
3001
\`\`\`

https://link.tld/3001 -> https://link.tld/3001
<file:///path/3001> -> <file:///path/3001>`))},[]),B.useProxy(i.storage),c.React.createElement(c.ReactNative.ScrollView,{style:P.view},c.React.createElement(M,{title:"Usage",titleStyleType:"no_border"},c.React.createElement(Z,{style:P.codeblock},t)),c.React.createElement(M,{title:"Message Text Replacement",titleStyleType:"no_border"},c.React.createElement(F,{label:"All Numbers",subLabel:"Replaces all numbers in your messages like `3001`.",leading:c.React.createElement(O.Icon,{source:m.getAssetIDByName(i.storage.replace.all?"ic_check_24px":"ic_close_24px")}),value:i.storage.replace.all,onValueChange:function(e){i.storage.replace.all=e}}),c.React.createElement(q,null),c.React.createElement(F,{label:"Syntax Numbers",subLabel:"Replaces numbers in your messages with special syntax like `n3001;;`.",leading:c.React.createElement(O.Icon,{source:m.getAssetIDByName(i.storage.replace.syntax?"ic_check_24px":"ic_close_24px")}),value:i.storage.replace.syntax,onValueChange:function(e){i.storage.replace.syntax=e}})))}function R(t,a,e){return t.find(function(n){return n.name===a})?.value??e}let $;function K(){z(),$=_.commands.registerCommand({name:"written number",displayName:"written number",applicationId:"written-numbers",description:"Makes numbers written.",displayDescription:"Makes numbers written.",type:1,inputType:1,options:[{name:"number",displayName:"number",description:"The number to convert.",displayDescription:"The number to convert.",type:3,required:!0},{name:"commas",displayName:"commas",description:"Whether or not to use commas.",displayDescription:"Whether or not to use commas.",type:5,required:!1},{name:"hundred_and",displayName:"hundred_and",description:"Whether or not to use and after hundreds.",displayDescription:"Whether or not to use and after hundreds.",type:5,required:!1}],async execute(t,a){let e=R(t,"number","");const n=R(t,"commas",!1),s=R(t,"hundred_and",!1),r=await I({number:e,languageOptions:{commas:n,hundredAnd:s}});c.clipboard.setString(r),v.showToast("Copied number to clipboard.",m.getAssetIDByName("toast_copy_link"))}})}function z(){$?.()}i.storage.replace??={all:!0,syntax:!0},i.storage.replace.all=i.storage.replace.all!=null?i.storage.replace.all:i.storage.replace.basic;var H={onLoad:function(){K(),X()},onUnload:function(){z(),E()},settings:G};return b.default=H,Object.defineProperty(b,"__esModule",{value:!0}),b})({},vendetta.plugin,vendetta.metro.common,vendetta.storage,vendetta.ui,vendetta.ui.assets,vendetta.ui.components,vendetta.metro,vendetta.patcher,vendetta,vendetta.ui.toasts);
