(function(d,o,x,D,c,O,N,w,v,$){"use strict";const{FormSection:C,FormDivider:M,FormRow:I,FormSwitchRow:_}=O.Forms;function P(){return D.useProxy(o.storage),React.createElement(x.ReactNative.ScrollView,{style:{flex:1}},React.createElement(C,{title:"Message Text Replacement",titleStyleType:"no_border"},React.createElement(_,{label:"Basic Numbers",subLabel:"Replaces numbers in your messages like `10 -> ten`.",leading:React.createElement(I.Icon,{source:c.getAssetIDByName(o.storage.replace.basic?"ic_check_24px":"ic_close_24px")}),value:o.storage.replace.basic,onValueChange:function(t){o.storage.replace.basic=t}}),React.createElement(M,null),React.createElement(_,{label:"Syntax Numbers",subLabel:"Replaces numbers in your messages with syntax like `n10;; -> ten` and `N10n**100n;; -> Ten duotrigintillion`.",leading:React.createElement(I.Icon,{source:c.getAssetIDByName(o.storage.replace.syntax?"ic_check_24px":"ic_close_24px")}),value:o.storage.replace.syntax,onValueChange:function(t){o.storage.replace.syntax=t}})))}function l(t,a,n){return t.find(function(e){return e.name===a})?.value??n}function m(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];const e=a.map(function(r){switch(typeof r){case"string":return r;case"object":return JSON.stringify(r)}return r?.toString()}).join(" ");w.showToast(e,c.getAssetIDByName("ic_badge_staff")),N.logger.log(...a)}const z=/^-?(?:\d+\.?|\.\d+|\d+\.\d+)$/,p=new Map;async function g(t){let{number:a,options:n,languageOptions:e}=t;if(n??={language:"en"},e??={},p.has(a))return p.get(a);if(!z.test(a))try{a=new Function(`return ${a}`)()}catch(s){return m(s),"NotANumber"}const r=await fetch("https://numbers.kyza.net/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({number:a,options:n,languageOptions:e})}).then(function(s){return s.text()});return p.set(a,r),r}let A;function B(){S(),A=N.commands.registerCommand({name:"written number",displayName:"written number",applicationId:"written-numbers",description:"Makes numbers written.",displayDescription:"Makes numbers written.",type:1,inputType:1,options:[{name:"number",displayName:"number",description:"The number to convert.",displayDescription:"The number to convert.",type:3,required:!0},{name:"commas",displayName:"commas",description:"Whether or not to use commas.",displayDescription:"Whether or not to use commas.",type:5,required:!1},{name:"hundred_and",displayName:"hundred_and",description:"Whether or not to use and after hundreds.",displayDescription:"Whether or not to use and after hundreds.",type:5,required:!1}],async execute(t,a){let n=l(t,"number","");const e=l(t,"commas",!1),r=l(t,"hundred_and",!1),s=await g({number:n,languageOptions:{commas:e,hundredAnd:r}});x.clipboard.setString(s),w.showToast("Copied number to clipboard.",c.getAssetIDByName("toast_copy_link"))}})}function S(){A?.()}const{getCurrentUser:E}=v.findByProps("getCurrentUser"),F=v.findByProps("sendMessage","receiveMessage");let T;function R(t,a){return t.some(function(n){let[e,r]=n;return e<=a&&a<=r})}function L(t){return t.charAt(0).toUpperCase()+t.slice(1)}function j(t,a,n,e){return t.substring(0,a)+e+t.substring(n)}var u;(function(t){t[t.PLAIN=0]="PLAIN",t[t.SYNTAX=1]="SYNTAX"})(u||(u={}));const h=/(?:(?:(?<!\\)```(?:.|\n)+?(?<!\\)```)|(?:(?<!\\)`[^`]+?`))/g,f=/(([-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*))|(?:(?<!\\)<.+?>))/gi,y=/\b(?<!n)-?(?:\d+\.|\d+|\.\d+|\d+\.\d+)(?!;;)\b/gi,b=/\b(n)(.+?);;/gi;async function J(t){const a=t,n=[];let e;for(;(e=h.exec(t))!==null;)e.index===h.lastIndex&&h.lastIndex++,n.push([e.index,e.index+e[0].length-1]);for(e=null;(e=f.exec(t))!==null;)e.index===f.lastIndex&&f.lastIndex++,n.push([e.index,e.index+e[0].length-1]);const r=[];if(o.storage.replace.syntax)for(e=null;(e=b.exec(t))!==null;)e.index===b.lastIndex&&b.lastIndex++,R(n,e.index)||(r.push({type:u.SYNTAX,match:e,capitalize:e[1]==="N",words:g({number:e[2]})}),n.push([e.index,e.index+e[0].length-1]));if(o.storage.replace.basic)for(e=null;(e=y.exec(t))!==null;)e.index===y.lastIndex&&y.lastIndex++,R(n,e.index)||r.push({type:u.PLAIN,match:e,capitalize:!1,words:g({number:e[0]})});r.sort(function(s,i){return s.match.index>i.match.index?-1:s.match.index<i.match.index?1:0});for(const s of r){let i=await s.words;s.capitalize&&(i=L(i)),t=j(t,s.match.index,s.match.index+s.match[0].length,i)}return E().premiumType===0&&t.length>2e3||t.length>4e3?(m("The transformed message is too long."),a):t}function U(){k(),T=$.instead("sendMessage",F,function(t,a){const n=JSON.parse(JSON.stringify(t));(async function(){try{n[1].content=await J(n[1].content)}catch(e){m(e.stack)}a(...n)})()})}function k(){T?.()}o.storage.replace??={basic:!0,syntax:!0};var W={onLoad:function(){B(),U()},onUnload:function(){S(),k()},settings:P};return d.default=W,Object.defineProperty(d,"__esModule",{value:!0}),d})({},vendetta.plugin,vendetta.metro.common,vendetta.storage,vendetta.ui.assets,vendetta.ui.components,vendetta,vendetta.ui.toasts,vendetta.metro,vendetta.patcher);
